let operationFlag,chosenNumber,quantity,numberLength,slider=document.querySelector(".slider"),sliderTrack=slider.querySelector(".slider-track"),nextButtons=slider.querySelectorAll(".next"),prevButtons=slider.querySelectorAll(".prev"),nextInputs=slider.querySelectorAll(".next-input"),inputs=slider.querySelectorAll("input"),slides=document.querySelectorAll(".slide"),slideWidth=slides[0].offsetWidth,slideIndex=0,flag=1,slide=function(){if(sliderTrack.style.transition="transform .5s",sliderTrack.style.transform=`translate3d(-${slideIndex*slideWidth}px, 0px, 0px)`,4==slideIndex&&flag)flag=0,generateTask(info.quantity);else if(5==slideIndex){checkAnswers(answers,userAnswers),showState();for(let e=0;e<info.quantity;e++)popupTaskContainer.insertAdjacentHTML("beforeend",generateResultsTemplate(e))}},operationBtns=document.querySelectorAll(".operationBtn"),numbers=document.querySelectorAll(".slider-item-numbers__number"),numberInput=document.querySelector(".slider-item-numbers input"),quantityInput=document.querySelector(".quantityInput"),lengthInput=document.querySelector(".inputLength"),taskContainer=document.querySelector(".slider-item-tasks"),tasks=[],answers=[],answerInputs=[],userAnswers=[],wrongUserAnswers=[],rightUserAnswers=[],withoutEnteredAnswer=[],wrongColor="#e62548",rightColor="#13a080",info={operationFlag:operationFlag,chosenNumber:chosenNumber,quantity:quantity,numberLength:numberLength,answers:answers,userAnswers:userAnswers,rightUserAnswers:rightUserAnswers,wrongUserAnswers:wrongUserAnswers,log(){console.log(this.operationFlag),console.log(this.chosenNumber),console.log(this.quantity),console.log(this.numberLength),console.log(this.answers),console.log(this.userAnswers),console.log(this.rightAnswers),console.log(this.wrongAnswers)}};function inputEntered(e){"Enter"===e.key&&(slideIndex++,slide())}inputs.forEach(e=>{e.onkeypress=function(e){(event.keyCode<48||event.keyCode>57)&&(event.returnValue=!1)}}),nextButtons.forEach(e=>{e.addEventListener("click",(function(){slideIndex++,slide()}))}),prevButtons.forEach(e=>{e.addEventListener("click",(function(){slideIndex--,slide()}))}),nextInputs.forEach(e=>{e.addEventListener("keyup",inputEntered)}),operationBtns.forEach(e=>{e.addEventListener("click",(function(){this.classList.contains("btn-divide")?info.operationFlag=1:info.operationFlag=0,console.log(operationFlag)}))}),numbers.forEach(e=>{e.addEventListener("click",(function(){info.chosenNumber=this.textContent,console.log(this.textContent)}))}),numberInput.oninput=()=>{info.chosenNumber=numberInput.value},quantityInput.oninput=()=>{info.quantity=quantityInput.value},lengthInput.oninput=()=>{info.numberLength=lengthInput.value,lengthInput.value>8&&(console.log("Количество знаков не может превышать 8"),lengthInput.value="")};let taskTemplate=(e,n)=>{let t=e?"/":"*",s=parseInt(info.numberLength,10);return tasks.push(Math.floor((Math.random()+1)*10**s)),`\n        <div class="slider-item-task">\n            <span class="slider-item-task__problem">${tasks[n]} ${t} ${info.chosenNumber}  </span>\n            <input type="text" data-id=${n} class="slider-item-task__answer input userAnswerInput">\n        </div>\n    `};function generateResultsTemplate(e){let n=info.operationFlag?"/":"*",t=userAnswers[e],s=rightColor,r="&#10003;";return null==t&&(t="Нет ответа"),t!=answers[e]&&(s=wrongColor,r="&#10060;"),`\n        <div class="more-results-task">\n            <div class="more-results-task__example">\n                Пример: ${tasks[e]} ${n} ${info.chosenNumber}\n            </div>\n            <div class="more-results-task__user">\n                Ваш ответ: <span class="more-results-task__user-answer "style="color: ${s}">${t} ${r}</span>\n            </div>\n            <div class="more-results-task__answer">\n                Верный ответ: <span class="more-results-task__answer-text">${answers[e]}</span>\n            </div>\n        </div>\n    `}function getUserAnswers(){answerInputs=document.querySelectorAll(".userAnswerInput");for(let e=0;e<answerInputs.length;e++)answerInputs[e].addEventListener("input",()=>{userAnswers[e]=answerInputs[e].value})}let popupTaskContainer=document.querySelector(".more-results-container");function generateTask(){for(let e=0;e<info.quantity;e++)taskContainer.insertAdjacentHTML("beforeend",taskTemplate(info.operationFlag,e));generateAnswersArray(),getUserAnswers()}function generateAnswersArray(){for(let e=0;e<tasks.length;e++)0==info.operationFlag?answers.push(tasks[e]*info.chosenNumber):answers.push(tasks[e]/info.chosenNumber)}function checkAnswers(e,n){for(let t=0;t<e.length;t++)null==n[t]?withoutEnteredAnswer.push(n[t]):e[t]==n[t]?rightUserAnswers.push(n[t]):wrongUserAnswers.push(n[t])}let rightAnswersQuantity=document.querySelector(".rightAnswersQuantity"),wrongAnswersQuantity=document.querySelector(".wrongAnswersQuantity"),withoutAnswerQuantity=document.querySelector(".withoutAnswerQuantity");function showState(){rightAnswersQuantity.textContent=rightUserAnswers.length,wrongAnswersQuantity.textContent=wrongUserAnswers.length,withoutAnswerQuantity.textContent=withoutEnteredAnswer.length}let popupWindow=document.querySelector(".popup"),moreInfo=document.querySelector(".slider-item-results__more");moreInfo.onclick=function(){popupWindow.classList.toggle("show")},popupWindow.onclick=function(){this.classList.toggle("show")};